<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: monospace;
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .test-section {
            background: #334155;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #475569;
        }
        .test-section h2 {
            color: #60a5fa;
            margin-top: 0;
        }
        .success {
            color: #22c55e;
        }
        .error {
            color: #ef4444;
        }
        .loading {
            color: #fbbf24;
        }
        pre {
            background: #1e293b;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ì•”í˜¸í™”í ì •ë³´ API í…ŒìŠ¤íŠ¸</h1>

    <!-- 1. ê³µí¬-íƒìš• ì§€ìˆ˜ -->
    <div class="test-section">
        <h2>1ï¸âƒ£ ê³µí¬-íƒìš• ì§€ìˆ˜ (Fear & Greed Index)</h2>
        <button onclick="testFearGreed()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="fear-greed-result" class="loading">í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <pre id="fear-greed-data"></pre>
    </div>

    <!-- 2. ê³ ë˜ ì¶”ì  -->
    <div class="test-section">
        <h2>2ï¸âƒ£ ê³ ë˜ ê±°ë˜ ì¶”ì  (Whale Alert)</h2>
        <button onclick="testWhaleAlert()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="whale-result" class="loading">í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <pre id="whale-data"></pre>
        <p style="font-size: 12px; color: #94a3b8;">
            âš ï¸ Whale AlertëŠ” API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤ (ë¬´ë£Œ í”Œëœ ê°€ëŠ¥)<br>
            ê°€ì…: <a href="https://whale-alert.io/" target="_blank" style="color: #60a5fa;">https://whale-alert.io/</a>
        </p>
    </div>

    <!-- 3. ì²­ì‚° ë°ì´í„° -->
    <div class="test-section">
        <h2>3ï¸âƒ£ ì²­ì‚° ë°ì´í„° (Coinglass)</h2>
        <button onclick="testCoinglass()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="coinglass-result" class="loading">í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <pre id="coinglass-data"></pre>
    </div>

    <!-- 4. ë‰´ìŠ¤ -->
    <div class="test-section">
        <h2>4ï¸âƒ£ ì•”í˜¸í™”í ë‰´ìŠ¤ (CryptoCompare)</h2>
        <button onclick="testCryptoNews()">í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="news-result" class="loading">í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <pre id="news-data"></pre>
    </div>

    <script>
        // 1. ê³µí¬-íƒìš• ì§€ìˆ˜ í…ŒìŠ¤íŠ¸
        async function testFearGreed() {
            const resultEl = document.getElementById('fear-greed-result');
            const dataEl = document.getElementById('fear-greed-data');

            resultEl.className = 'loading';
            resultEl.textContent = 'â³ API í˜¸ì¶œ ì¤‘...';
            dataEl.textContent = '';

            try {
                const response = await fetch('https://api.alternative.me/fng/?limit=10');

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const data = await response.json();

                resultEl.className = 'success';
                resultEl.innerHTML = `âœ… ì„±ê³µ! í˜„ì¬ ì§€ìˆ˜: ${data.data[0].value} (${data.data[0].value_classification})`;

                dataEl.textContent = JSON.stringify(data, null, 2);

                // ê°„ë‹¨í•œ ë¶„ì„
                console.log('ê³µí¬-íƒìš• ì§€ìˆ˜:', data.data[0]);

            } catch (error) {
                resultEl.className = 'error';
                resultEl.textContent = `âŒ ì‹¤íŒ¨: ${error.message}`;
                dataEl.textContent = error.stack;
            }
        }

        // 2. ê³ ë˜ ì¶”ì  í…ŒìŠ¤íŠ¸
        async function testWhaleAlert() {
            const resultEl = document.getElementById('whale-result');
            const dataEl = document.getElementById('whale-data');

            resultEl.className = 'loading';
            resultEl.textContent = 'â³ API í˜¸ì¶œ ì¤‘...';
            dataEl.textContent = '';

            try {
                // Whale Alert API í‚¤ í•„ìš” (ë¬´ë£Œ í”Œëœ: 1000 calls/month)
                const API_KEY = 'demo'; // ì—¬ê¸°ì— ì‹¤ì œ API í‚¤ ì…ë ¥

                const response = await fetch(`https://api.whale-alert.io/v1/transactions?api_key=${API_KEY}&min_value=500000&limit=10`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status} - API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤`);
                }

                const data = await response.json();

                resultEl.className = 'success';
                resultEl.innerHTML = `âœ… ì„±ê³µ! ìµœê·¼ ê±°ë˜ ${data.transactions?.length || 0}ê±´ ë°œê²¬`;

                dataEl.textContent = JSON.stringify(data, null, 2);

            } catch (error) {
                resultEl.className = 'error';
                resultEl.textContent = `âŒ ì‹¤íŒ¨: ${error.message}`;
                dataEl.textContent = `
API í‚¤ ë“±ë¡ ë°©ë²•:
1. https://whale-alert.io/ ì ‘ì†
2. ë¬´ë£Œ ê³„ì • ê°€ì…
3. API í‚¤ ë°œê¸‰ (1000 calls/month ë¬´ë£Œ)
4. ì´ ì½”ë“œì˜ API_KEYì— ì…ë ¥

ì—ëŸ¬ ìƒì„¸:
${error.stack}`;
            }
        }

        // 3. Coinglass ì²­ì‚° ë°ì´í„° í…ŒìŠ¤íŠ¸
        async function testCoinglass() {
            const resultEl = document.getElementById('coinglass-result');
            const dataEl = document.getElementById('coinglass-data');

            resultEl.className = 'loading';
            resultEl.textContent = 'â³ API í˜¸ì¶œ ì¤‘...';
            dataEl.textContent = '';

            try {
                // Coinglass API (ì¼ë¶€ ì—”ë“œí¬ì¸íŠ¸ëŠ” ë¬´ë£Œ)
                const response = await fetch('https://open-api.coinglass.com/public/v2/liquidation_history?symbol=BTC&time_type=h1');

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const data = await response.json();

                resultEl.className = 'success';
                resultEl.innerHTML = `âœ… ì„±ê³µ! ë°ì´í„° ìˆ˜ì‹ ë¨`;

                dataEl.textContent = JSON.stringify(data, null, 2);

            } catch (error) {
                resultEl.className = 'error';
                resultEl.textContent = `âŒ ì‹¤íŒ¨: ${error.message}`;
                dataEl.textContent = `
CoinglassëŠ” CORS ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ëŒ€ì•ˆ: í”„ë¡ì‹œ ì‚¬ìš© ë˜ëŠ” ë‹¤ë¥¸ ì²­ì‚° ë°ì´í„° API ì‚¬ìš©

ì—ëŸ¬ ìƒì„¸:
${error.stack}`;
            }
        }

        // 4. ì•”í˜¸í™”í ë‰´ìŠ¤ í…ŒìŠ¤íŠ¸
        async function testCryptoNews() {
            const resultEl = document.getElementById('news-result');
            const dataEl = document.getElementById('news-data');

            resultEl.className = 'loading';
            resultEl.textContent = 'â³ API í˜¸ì¶œ ì¤‘...';
            dataEl.textContent = '';

            try {
                // CryptoCompare ë‰´ìŠ¤ API (ë¬´ë£Œ, ì œí•œì )
                const response = await fetch('https://min-api.cryptocompare.com/data/v2/news/?lang=EN');

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const data = await response.json();

                resultEl.className = 'success';
                resultEl.innerHTML = `âœ… ì„±ê³µ! ë‰´ìŠ¤ ${data.Data?.length || 0}ê°œ ìˆ˜ì‹ `;

                dataEl.textContent = JSON.stringify(data, null, 2);

            } catch (error) {
                resultEl.className = 'error';
                resultEl.textContent = `âŒ ì‹¤íŒ¨: ${error.message}`;
                dataEl.textContent = error.stack;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê³µí¬-íƒìš• ì§€ìˆ˜ ìë™ í…ŒìŠ¤íŠ¸
        window.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ§ª API í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì¤€ë¹„ ì™„ë£Œ');
            testFearGreed(); // ìë™ ì‹¤í–‰
        });
    </script>
</body>
</html>
